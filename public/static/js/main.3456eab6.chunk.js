(this["webpackJsonpapp-front"]=this["webpackJsonpapp-front"]||[]).push([[0],{17:function(e,t,n){e.exports=n.p+"static/media/carpool1.59c3f133.jpg"},18:function(e,t,n){e.exports=n.p+"static/media/carpool.925449b8.jpg"},32:function(e,t,n){},41:function(e,t,n){e.exports=n(84)},46:function(e,t,n){},47:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(35),o=n.n(r),s=(n(46),n(3)),i=n(4),c=n(5),u=n(6),m=(n(47),n(13)),p=n(1),h=n(9),g=n.n(h),b=(n(32),n(36)),d=n.n(b),E=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).getSingleTrip=function(){var e=a.props.match.params;g.a.get("".concat("https://ironcarpool.herokuapp.com/api","/").concat(e.id),{withCredentials:!0}).then((function(e){var t=e.data;a.setState(t)})).catch((function(e){console.log(e)}))},a.AddCuCopilot=function(){var e=a.props.match.params;g.a.put("".concat("https://ironcarpool.herokuapp.com/api","/").concat(e.id),{},{withCredentials:!0}).then((function(){console.log("copilot agregado"),alert("you are in the trip"),a.props.history.push("/trips")})).catch((function(e){return console.log(e)}))},a.deleteTrip=function(){var e=a.props.match.params;g.a.delete("".concat("https://ironcarpool.herokuapp.com/api","/").concat(e.id),{withCredentials:!0}).then((function(){a.props.history.push("/trips")})).catch((function(e){console.log(e)}))},a.ownershipCheck=function(e){if(a.props.loggedInUser&&e.pilot&&e.pilot._id===a.props.loggedInUser._id)return l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("button",{style:{textDecoration:"none",color:"black"},className:"loginsub2",onClick:function(){return a.deleteTrip()}},"Cancel trip"))},a.checkCopilot=function(e){return"COPILOT"===a.props.loggedInUser.rol&&e.availableSeats>=e.copilots+1?l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("button",{style:{textDecoration:"none",color:"black"},className:"loginsub2",onClick:function(){return a.AddCuCopilot()}},"join tha trip")):"COPILOT"===a.props.loggedInUser.rol&&e.availableSeats===e.copilots+1?l.a.createElement("div",null,l.a.createElement("h2",null,"Full Trip"),l.a.createElement("p",null," 0 available availableSeats")):null},a.state={},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.getSingleTrip()}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h3",null,"Trip details"),l.a.createElement("p",null,"leaveBetween: ",this.state.leaveBetween),l.a.createElement("p",null,"date:",this.state.dayOfTheTrip),l.a.createElement("p",null,"starting point zone:  ",this.state.startingPointZone),l.a.createElement("p",null,"starting point adress number:  ",this.state.startingPointAdressNumber),l.a.createElement("br",null),l.a.createElement("p",null,"pilot name: ",this.state.pilot&&this.state.pilot.username),l.a.createElement("p",null,this.state.pilot&&this.state.pilot.profilePic),l.a.createElement("br",null),this.state.copilots&&this.state.copilots.length>0?l.a.createElement("h3",null,"Copilots Names "):l.a.createElement("h2",null,"no copilots yet"),this.state.copilots&&this.state.copilots.map((function(e,t){return l.a.createElement("div",null,l.a.createElement("p",{key:t},e.username),l.a.createElement("div",null,l.a.createElement(d.a,{src:e.profilePic,crossorigin:"anonymous"})))})),this.ownershipCheck(this.state),this.checkCopilot(this.state),l.a.createElement("br",null),"  ",l.a.createElement(p.b,{style:{textDecoration:"none",color:"black"},className:"loginsub2",to:"/trips"},"Back to trips"))}}]),n}(a.Component),f=n(17),v=n.n(f),O=(n(79),function e(){var t=this;Object(s.a)(this,e),this.signup=function(e,n,a,l,r,o){return t.service.post("/signup",{username:e,password:n,phone:a,email:l,rol:r,profilePic:o}).then((function(e){return e.data}))},this.loggedin=function(){return t.service.get("/loggedin").then((function(e){return e.data}))},this.login=function(e,n){return t.service.post("/login",{username:e,password:n}).then((function(e){return e.data}))},this.logout=function(){return t.service.post("/logout",{}).then((function(e){return e.data}))};var n=g.a.create({baseURL:"".concat("https://ironcarpool.herokuapp.com/api"),withCredentials:!0});this.service=n}),w={width:"100%",height:"800px",backgroundImage:"url(".concat(v.a,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover"},C=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).logoutUser=function(){a.service.logout().then((function(){a.setState({loggedInUser:null})}))},a.getAllTrips=function(){g.a.get("".concat("https://ironcarpool.herokuapp.com/api","/trips"),{withCredentials:!0}).then((function(e){a.setState({listOfTrips:e.data})}))},a.pilotCheck=function(){if("PILOT"===a.props.loggedInUser.rol)return l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement(p.b,{className:"loginsub2",to:"/create"},"Create trip \ud83d\ude97"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h3",null,"Trip List"),l.a.createElement("br",null),a.state.listOfTrips.map((function(e){return l.a.createElement("div",{class:"card1",key:e._id},l.a.createElement("div",{class:"container"},l.a.createElement("br",null),l.a.createElement("p",null,"date: ",e.dayOfTheTrip),l.a.createElement("p",null,"leave at: ",e.leaveBetween),l.a.createElement("p",null,"starting point zone:  ",e.startingPointZone),l.a.createElement("p",null,"starting point adress number:  ",e.startingPointAdressNumber),l.a.createElement("p",null,"pilot name: ",e.pilot.username),l.a.createElement("p",null,"register copilots ",e.copilots.length,"/ ",e.availableSeats),l.a.createElement("br",null),l.a.createElement(p.b,{className:"loginsub2",to:"/".concat(e._id)},"Check trip details")))})))},a.copilotCheck=function(){if("COPILOT"===a.props.loggedInUser.rol)return l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("h3",null,"Trip List"),l.a.createElement("br",null),a.state.listOfTrips.map((function(e){return l.a.createElement("div",{key:e._id},l.a.createElement("br",null),l.a.createElement("p",null,"pilotname: ",e.pilot.username),l.a.createElement("p",null,"leave At: ",e.leaveBetween),l.a.createElement("p",null," date: ",e.dayOfTheTrip),l.a.createElement("p",null,"starting point zone:  ",e.startingPointZone),l.a.createElement("p",null,"starting point adress number:  ",e.startingPointAdressNumber),l.a.createElement("p",null,"register copilots ",e.copilots.length,"/ ",e.availableSeats),l.a.createElement(p.b,{style:{textDecoration:"none",color:"black"},className:"loginsub2",to:"/".concat(e._id)},"trip details"),l.a.createElement("br",null))})))},a.state={listOfTrips:[],showAddForm:!1},a.service=new O,a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.getAllTrips()}},{key:"render",value:function(){return l.a.createElement("section",{style:w},l.a.createElement("div",null,this.copilotCheck(this.state)),l.a.createElement("div",null,this.pilotCheck(this.state)))}}]),n}(a.Component),y=n(16),k=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).logoutUser=function(){a.service.logout().then((function(){a.setState({loggedInUser:null}),a.props.getUser(null)}))},a.state={loggedInUser:null},a.service=new O,a}return Object(i.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(y.a)({},this.state,{loggedInUser:e.userInSession}))}},{key:"render",value:function(){return this.state.loggedInUser?l.a.createElement("nav",{className:"nav-style"},l.a.createElement("ul",null,l.a.createElement("li",null,"Welcome, ",this.state.loggedInUser.username))):l.a.createElement("nav",{className:"nav-style"},l.a.createElement("ul",null))}}]),n}(a.Component),U=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).logoutUser=function(){a.service.logout().then((function(){a.setState({loggedInUser:null}),a.props.getUser(null)}))},a.state={loggedInUser:null},a.service=new O,a}return Object(i.a)(n,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(y.a)({},this.state,{loggedInUser:e.userInSession}))}},{key:"render",value:function(){var e=this;return l.a.createElement("footer",null,l.a.createElement(p.b,{to:"/"},l.a.createElement("button",{className:"loginsub2",onClick:function(){return e.logoutUser()}},"Loaagit gout")))}}]),n}(a.Component),S=n(12),I=g.a.create({baseURL:"".concat("https://ironcarpool.herokuapp.com/api"),withCredentials:!0}),T=function(e){throw e},j=function(e){return I.post("/upload",e).then((function(e){return e.data})).catch(T)},P=n(39),N=n.n(P),A=n(18),x=n.n(A),L=function(e){console.log(e)},D={width:"100%",height:"900px",backgroundImage:"url(".concat(x.a,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover"},B=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleFileUpload=function(e){var t=new FormData;t.append("profilePic",e.target.files[0]),j(t).then((function(e){a.setState({profilePic:e.secure_url})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password,l=a.state.phone,r=a.state.email,o=a.state.rol,s=a.state.profilePic;return a.state.password.length<8?alert("your password needs to be at least 8 characters"):a.state.phone&&a.state.username&&a.state.password&&a.state.phone&&a.state.email&&a.state.rol?void a.service.signup(t,n,l,r,o,s).then((function(e){a.setState({username:"",password:"",phone:"",email:"",rol:"",profilePic:""}),a.props.history.push("/trips"),a.props.getUser(e)})).catch((function(e){return console.log(e)})):alert("fill all the form ")},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(S.a)({},n,l))},a.state={username:"",password:"",phone:"",email:"",rol:"",profilePic:""},a.service=new O,a}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{style:D},l.a.createElement("h3",null,"Signup"),l.a.createElement("form",{class:"signup-form",onSubmit:this.handleFormSubmit},l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",null," Profile pic: "),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{class:"profileTag",type:"file",name:"profilePic",onChange:function(t){return e.handleFileUpload(t)}}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",null,"Username: "),l.a.createElement("input",{class:"w3-input",name:"username",type:"text",value:this.state.username,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("br",null)," ",l.a.createElement("br",null),l.a.createElement("label",null,"Password: "),l.a.createElement("input",{class:"w3-input",name:"password",type:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("br",null)," ",l.a.createElement("br",null),l.a.createElement("label",null,"phone: "),l.a.createElement("input",{class:"w3-input",name:"phone",type:"number",value:this.state.phone,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("br",null)," ",l.a.createElement("br",null),l.a.createElement("label",null,"email: "),l.a.createElement("input",{class:"w3-input",name:"email",type:"string",value:this.state.email,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("br",null)," ",l.a.createElement("br",null),l.a.createElement("label",null,"rol ",l.a.createElement("br",null),l.a.createElement("select",{name:"rol",value:this.state.rol,onChange:function(t){return e.handleChange(t)}},l.a.createElement("option",{value:"",disabled:!0},"Select role"),l.a.createElement("option",{name:"PILOT",rol:"PILOT"},"PILOT"),l.a.createElement("option",{name:"COPILOT",rol:"COPILOT"},"COPILOT"))),l.a.createElement("br",null)," ",l.a.createElement("br",null),l.a.createElement("input",{className:"loginsub",type:"submit",value:"Signup"})),l.a.createElement("br",null)," ",l.a.createElement("br",null),l.a.createElement(N.a,{clientId:"986930867229-7enoctj4mv34n4rlhrnr3s920e7b1tjc.apps.googleusercontent.com",buttonText:"Login",onSuccess:L,onFailure:L,cookiePolicy:"single_host_origin"}),l.a.createElement("br",null)," ",l.a.createElement("br",null),l.a.createElement("p",null,"Alredy have account?",l.a.createElement("br",null)," ",l.a.createElement("br",null),l.a.createElement(p.b,{className:"loginsub2",to:"/"},"Login")))}}]),n}(a.Component),z=(n(80),{width:"100%",height:"900px",backgroundImage:"url(".concat(x.a,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover"}),F=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password;a.service.login(t,n).then((function(e){a.setState({username:"",password:""}),a.props.getUser(e),a.props.history.push("/trips")})).catch((function(e){return console.log(e)}))},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(S.a)({},n,l))},a.state={username:"",password:""},a.service=new O,a}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return l.a.createElement("section",{style:z},l.a.createElement("br",null),l.a.createElement("form",{className:"login-form",onSubmit:this.handleFormSubmit},l.a.createElement("h1",null,"Login"),l.a.createElement("br",null),l.a.createElement("label",null,"Username:   "),l.a.createElement("input",{className:"w3-input",type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",null,"Password: "),l.a.createElement("input",{className:"w3-input",type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{className:"loginsub",type:"submit",value:"Login"})),l.a.createElement("br",null),l.a.createElement("p",null,"Don't have account?",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(p.b,{style:{textDecoration:"none",color:"black"},className:"loginsub2",to:"/signup"}," Signup")))}}]),n}(a.Component),Z=n(40),_=function(e){var t=e.component,n=e.user,a=Object(Z.a)(e,["component","user"]);return console.log(Object(y.a)({component:t,user:n},a)),l.a.createElement(m.b,Object.assign({},a,{render:function(e){return n?l.a.createElement(t,Object.assign({},e,{loggedInUser:n})):l.a.createElement(m.a,{to:{pathname:"/",state:{from:e.location}}})}}))},R=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleFormSubmit=function(e){e.preventDefault();var t=a.state.dayOfTheTrip,n=a.state.leaveBetween,l=a.state.startingPointAdressNumber,r=a.state.startingPointZone,o=a.state.availableSeats;g.a.post("".concat("https://ironcarpool.herokuapp.com/api","/create"),{dayOfTheTrip:t,leaveBetween:n,startingPointZone:r,startingPointAdressNumber:l,availableSeats:o},{withCredentials:!0}).then((function(){alert("trip created"),a.props.history.push("/trips")})).catch((function(e){return console.log(e)}))},a.handleChange=function(e){var t=e.target,n=t.name,l=t.value;a.setState(Object(S.a)({},n,l))},a.state={dayOfTheTrip:"",leaveBetween:"",availableSeats:"",startingPointAdressNumber:"",startingPointZone:""},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("form",{class:"login-form",onSubmit:this.handleFormSubmit},l.a.createElement("br",null),l.a.createElement("h3",null,"register a trip"),l.a.createElement("br",null),l.a.createElement("label",null,"dayOfTheTrip: "),l.a.createElement("input",{class:"w3-input",type:"date",name:"dayOfTheTrip",value:this.state.dayOfTheTrip,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",null,"leaveBetween: "),l.a.createElement("input",{class:"w3-input",type:"time",name:"leaveBetween",value:this.state.leaveBetween,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",null,"Starting point zone: "),l.a.createElement("select",{name:"startingPointZone",value:this.state.startingPointZone,onChange:function(t){return e.handleChange(t)},style:{textDecoration:"none",color:"black"},className:"loginsub2"},l.a.createElement("option",{value:"",disabled:!0},"starting Point Zone"),l.a.createElement("option",{name:"Alamos",startingpointzone:"Alamos"},"Alamos"),l.a.createElement("option",{name:"Moderna",startingpointzone:"Moderna"},"Moderna"),l.a.createElement("option",{name:"Narvarte",startingpointzone:"Narvarte"},"Narvarte"),l.a.createElement("option",{name:"DelValle",startingpointzone:"DelValle"},"Del Valle")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",null,"Starting point adress & number: "),l.a.createElement("input",{class:"w3-input",type:"string",name:"startingPointAdressNumber",value:this.state.startingPointAdressNumber,onChange:function(t){return e.handleChange(t)}}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",null,"Available Seats: "),l.a.createElement("select",{name:"availableSeats",value:this.state.availableSeats,onChange:function(t){return e.handleChange(t)}},l.a.createElement("option",{value:"",disabled:!0},"Available seats"),l.a.createElement("option",{name:"1",availableseats:"1"},"1"),l.a.createElement("option",{name:"2",availableseats:"3"},"2"),l.a.createElement("option",{name:"3",availableseats:"3"},"3")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("input",{className:"loginsub",type:"submit",value:"Submit"})),l.a.createElement("br",null),l.a.createElement(p.b,{style:{textDecoration:"none",color:"black"},className:"loginsub2",to:"/trips"},"Back to trips"))}}]),n}(a.Component);n(81).config();var M={width:"100%",height:"800px",backgroundImage:"url(".concat(v.a,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover"},W=function(e){Object(u.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).logoutUser=function(){a.service.logout().then((function(){a.setState({loggedInUser:null})}))},a.getTheUser=function(e){a.setState({loggedInUser:e})},a.state={loggedInUser:null},a.service=new O,a}return Object(i.a)(n,[{key:"fetchUser",value:function(){var e=this;null===this.state.loggedInUser&&this.service.loggedin().then((function(t){e.setState({loggedInUser:t.data})})).catch((function(t){e.setState({loggedInUser:!1})}))}},{key:"render",value:function(){var e=this;return this.fetchUser(),this.state.loggedInUser?l.a.createElement("div",{className:"App",style:M},l.a.createElement(k,{userInSession:this.state.loggedInUser,getUser:this.getTheUser}),l.a.createElement(m.d,null,l.a.createElement(_,{user:this.state.loggedInUser,path:"/trips",component:C}),l.a.createElement(_,{user:this.state.loggedInUser,exact:!0,path:"/create",component:R}),l.a.createElement(_,{user:this.state.loggedInUser,exact:!0,path:"/:id",component:E})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(p.b,{className:"footer",to:"/"},l.a.createElement("button",{className:"loginsub2",onClick:function(){return e.logoutUser()}},"Logout"))):l.a.createElement("div",{className:"App"},l.a.createElement(k,{userInSession:this.state.loggedInUser,getUser:this.getTheUser}),l.a.createElement(m.d,null,l.a.createElement(m.b,{exact:!0,path:"/",render:function(t){return l.a.createElement(F,Object.assign({},t,{getUser:e.getTheUser}))}}),l.a.createElement(m.b,{exact:!0,path:"/signup",render:function(){return l.a.createElement(B,{getUser:e.getTheUser})}}),l.a.createElement(_,{user:this.state.loggedInUser,path:"/trips",component:C}),l.a.createElement(_,{user:this.state.loggedInUser,path:"/:id",component:E})),l.a.createElement(U,{userInSession:this.state.loggedInUser,getUser:this.getTheUser}))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(p.a,null,l.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.3456eab6.chunk.js.map